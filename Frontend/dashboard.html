<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Dashboard - NetPing</title>

    <!-- STYLES -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet" />
    <link href="css/styles.css" rel="stylesheet" />

    <!-- ICONS -->
    <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>

    <style>
      body {
        background: #f5f6fa;
      }
      .device-card {
        border-radius: 12px;
        background: #fff;
        padding: 16px;
        margin-bottom: 18px;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);
      }
      .sensor-item {
        display: flex;
        justify-content: space-between;
        padding: 4px 0;
      }
      .sensor-value {
        font-weight: 600;
      }
    </style>

    <!-- TOKEN CHECK -->
    <script>
      const token = localStorage.getItem("token");
      if (!token) {
        window.location.href = "/login.html";
      }

      const role = localStorage.getItem("role"); 
    </script>
  </head>

  <body class="sb-nav-fixed">
    <!-- TOP NAVBAR -->
    <nav class="sb-topnav navbar navbar-expand navbar-dark bg-dark">
      <a class="navbar-brand ps-3" href="dashboard.html">NetPing Monitoring</a>

      <button class="btn btn-link btn-sm me-3" id="sidebarToggle">
        <i class="fas fa-bars"></i>
      </button>

      <div class="ms-auto me-3">
        <button class="btn btn-outline-light" onclick="logout()">ðŸšª Logout</button>
      </div>
    </nav>

    <!-- LAYOUT -->
    <div id="layoutSidenav">
      <!-- SIDEBAR -->
      <div id="layoutSidenav_nav">
        <nav class="sb-sidenav accordion sb-sidenav-dark">
          <div class="sb-sidenav-menu">
            <div class="nav">

              <div class="sb-sidenav-menu-heading">Core</div>
              <a class="nav-link active" href="dashboard.html">
                <i class="fas fa-tachometer-alt me-2"></i> Dashboard
              </a>

              <div class="sb-sidenav-menu-heading">Management</div>

              <!-- ADMIN ONLY NAV ITEMS -->
              <a class="nav-link" id="devicesLink" href="devices.html">
                <i class="fas fa-network-wired me-2"></i> Devices
              </a>

              <a class="nav-link" id="usersLink" href="user.html">
                <i class="fas fa-users me-2"></i> Users
              </a>

            </div>
          </div>

          <div class="sb-sidenav-footer">Logged in</div>
        </nav>
      </div>

      <!-- CONTENT -->
      <div id="layoutSidenav_content">
        <main>
          <div class="container-fluid px-4">
            <h1 class="mt-4">Dashboard</h1>
            <ol class="breadcrumb mb-4">
              <li class="breadcrumb-item active">Monitoring Overview</li>
            </ol>

            <h4 class="mb-3">Devices</h4>
            <div class="row" id="deviceCards"></div>
          </div>
        </main>

        <footer class="py-4 bg-light mt-auto">
          <div class="container-fluid px-4 d-flex justify-content-between small">
            <div class="text-muted">Â© shuhratCoder</div>
          </div>
        </footer>
      </div>
    </div>

    <!-- SCRIPTS -->
    <script>
      // ROLE-BASED NAV CONTROL
      if (role !== "admin") {
        document.getElementById("devicesLink").style.display = "none";
        document.getElementById("usersLink").style.display = "none";
      }

      function logout() {
        localStorage.removeItem("token");
        localStorage.removeItem("role");
        window.location.href = "/login.html";
      }
    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/scripts.js"></script>
    <script src="dashboard.js"></script>
  </body>
</html>
